<script type="text/javascript">
/* <![CDATA[ */
var doRefresh;
var skipRefresh = false;
function autoRefresh()
{
    var url    = "listen-data";
    var target = document.getElementById("listen_div");

    doRefresh = function() 
    {
       if (window.skipRefresh) return;
       if (skipRefresh) return;
       var xmlhttp=new XMLHttpRequest();
       xmlhttp.open("GET",url,false);
       xmlhttp.send();
       if (xmlhttp.readyState==4 && xmlhttp.status==200) {
           target.innerHTML=xmlhttp.responseText;
       }
    }
    setInterval(doRefresh, 500);
}
function stopRefresh()
{
   window.skipRefresh = true;
   skipRefresh = true;
   clearInterval(window.doRefresh);
   clearInterval(doRefresh);
}
/* ]]> */
</script>
